"use strict";(self.webpackChunkic_design_system=self.webpackChunkic_design_system||[]).push([[6813],{36813:function(t,e,a){a.r(e),a.d(e,{ic_tab_context:function(){return b}});var s=a(19067),i=a(73817);const n="context-id",b=class{constructor(t){(0,s.r)(this,t),this.icTabSelect=(0,s.c)(this,"icTabSelect",3),this.tabSelect=(0,s.c)(this,"tabSelect",3),this.newTabPanels=[],this.newTabs=[],this.emitEvents=t=>{const e=this.el.querySelectorAll("ic-tab")[t].textContent.trim();this.icTabSelect.emit({tabIndex:t,tabLabel:e}),this.tabSelect.emit({tabIndex:t,tabLabel:e})},this.linkTabs=()=>{this.tabs.forEach(((t,e)=>{const a=`ic-tab-${e}-context-${this.contextId}`,s=`ic-tab-panel-${e}-context-${this.contextId}`;t.setAttribute("id",a),t.tabId=`ic-tab--${e}-context-${this.contextId}`,t.tabPosition=e,t.setAttribute("aria-controls",s),t.setAttribute(n,this.contextId),this.tabGroup.setAttribute(n,this.contextId),this.tabPanels[e].setAttribute("id",s),this.tabPanels[e].setAttribute("aria-labelledby",a),this.tabPanels[e].setAttribute(n,this.contextId),this.appearance===i.I.Light&&(t.appearance=this.appearance,this.tabPanels[e].appearance=this.appearance)})),this.appearance===i.I.Light&&(this.tabGroup.appearance=this.appearance)},this.getChildren=()=>{this.tabGroup=this.el.querySelector("ic-tab-group"),this.tabs=Array.from(this.tabGroup.querySelectorAll("ic-tab")),this.tabPanels=Array.from(this.el.children).filter((t=>"IC-TAB-PANEL"===t.tagName)),this.enabledTabs=this.getEnabledTabs()},this.keydownHandler=t=>{const e="manual"===this.activationType,a=this.enabledTabs.findIndex((t=>t.tabId===this.tabs[e?this.focusedTabIndex:this.selectedTab].tabId)),s=e?this.keyboardFocusTab:this.keyboardSelectTab;let i=!0;switch(t.key){case"Home":s(0);break;case"End":s(this.enabledTabs.length-1);break;case"ArrowRight":s(a<this.enabledTabs.length-1?a+1:0);break;case"ArrowLeft":s((a>0?a:this.enabledTabs.length)-1);break;default:!e||"Enter"!==t.key&&" "!==t.key?i=!1:this.keyboardSelectTab(this.focusedTabIndex)}i&&t.preventDefault()},this.setInitialTab=()=>{if(void 0!==this.selectedTabIndex)this.selectedTab=this.selectedTabIndex,this.focusedTabIndex=this.selectedTabIndex;else{const t=this.tabs.findIndex((t=>t.tabId===this.enabledTabs[0].tabId));this.selectedTab=t,this.focusedTabIndex=t}},this.configureTabs=()=>{this.enabledTabs.forEach((t=>{t.selected=t.tabPosition===this.selectedTab})),this.tabPanels.forEach(((t,e)=>{t.hidden=e!==this.selectedTab}))},this.getEnabledTabs=()=>Array.from(this.tabs).filter((t=>!t.disabled)),this.keyboardSelectTab=t=>{const e=this.tabs.findIndex((e=>e.tabId===this.enabledTabs[t].tabId));this.enabledTabs[t].focus(),void 0===this.selectedTabIndex?this.selectedTab=e:this.emitEvents(e)},this.keyboardFocusTab=t=>{this.enabledTabs[t].focus(),this.focusedTabIndex=this.tabs.findIndex((e=>e.tabId===this.enabledTabs[t].tabId))},this.selectedTab=void 0,this.activationType="automatic",this.appearance="dark",this.contextId="default",this.selectedTabIndex=void 0}watchAppearanceHandler(){this.tabs.forEach(((t,e)=>{t.appearance=this.appearance,this.tabPanels[e].appearance=this.appearance})),this.tabGroup.appearance=this.appearance}updateSelectedTab(t){this.selectedTab=t}componentDidLoad(){void 0!==this.selectedTabIndex&&(this.selectedTab=this.selectedTabIndex),this.getChildren(),this.linkTabs(),this.tabGroup.addEventListener("keydown",this.keydownHandler),this.setInitialTab(),this.configureTabs()}componentWillUpdate(){this.configureTabs()}disconnectedCallback(){var t;null===(t=this.tabGroup)||void 0===t||t.removeEventListener("keydown",this.keydownHandler)}tabClickHandler(t){void 0===this.selectedTabIndex&&t.detail.contextId===this.contextId&&(this.selectedTab=t.detail.position),this.emitEvents(t.detail.position),t.stopImmediatePropagation()}tabCreatedHandler(t){this.tabs&&this.tabPanels&&((t.detail.setFocus?this.newTabs:this.newTabPanels).push(t.detail),this.newTabs.length===this.newTabPanels.length&&(this.tabs.push(...this.newTabs),this.tabPanels.push(...this.newTabPanels),this.enabledTabs=this.getEnabledTabs(),this.linkTabs(),this.tabs[this.selectedTab]&&this.tabPanels[this.selectedTab]||this.setInitialTab(),this.configureTabs(),this.newTabs=[],this.newTabPanels=[]))}tabEnabledHandler(){this.enabledTabs=this.getEnabledTabs()}async tabRemovedHandler(t){this.getChildren(),this.linkTabs(),this.tabs[this.selectedTab]&&this.tabPanels[this.selectedTab]?(this.tabs[this.selectedTab].selected=!0,this.tabPanels[this.selectedTab].hidden=!1):this.setInitialTab(),t&&this.tabs[this.selectedTab].setFocus()}render(){return(0,s.h)("slot",null)}get el(){return(0,s.g)(this)}static get watchers(){return{appearance:["watchAppearanceHandler"],selectedTabIndex:["updateSelectedTab"]}}}}}]);